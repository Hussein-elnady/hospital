{% extends 'admission/base.html' %}

{% block title %}Hospital Management System - Main Page{% endblock %}

{% block content %}
<style>
    /* Google Font Import */
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

    .container {
        max-width: 1400px;
        margin: 40px auto;
    }

    /* Jumbotron styles */
    .jumbotron {
        background-image: linear-gradient(to bottom, #f7f8fa, #e0e4e8);
        padding: 2rem 1rem;
        border-radius: 5px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        color: #333;
        font-family: 'Poppins', sans-serif;
    }

    .navigationli ul {
        list-style-type: none;
        padding: 0;
        text-align: center;
        margin-top: 50px;
    }

    .navigationli ul li {
        display: inline-block;
        margin-bottom: 0;
    }

    .navigationli ul li a {
        text-decoration: none;
        color: #fff;
        font-size: 18px;
        padding: 10px 20px;
        border-radius: 25px;
        background-image: linear-gradient(to right, #428bca, #5cb851);
        transition: background-color 0.3s ease;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        display: inline-block;
        font-family: 'Poppins', sans-serif;
    }

    .navigationli ul li a:hover {
        background-image: linear-gradient(to right, #6dd5fa, #2980b9);
    }

    .recent-records {
        margin-top: 20px;
    }

    .recent-records table {
        width: 100%;
        border-collapse: collapse;
        font-size: 14px;
    }

    .recent-records th,
    .recent-records td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: left;
        font-family: 'Poppins', sans-serif;
    }

    .recent-records th {
        background-color: #73afee;
        text-align: center;
    }

    .recent-records tbody tr:nth-child(even) {
        background-color: #f2f2f2;
    }

    .recent-records tbody tr:hover {
        background-color: #ddd;
    }

    .recent-records p {
        font-style: italic;
        color: #888;
        font-family: 'Poppins', sans-serif;
    }

    .recent-records h2 {
        margin-bottom: 10px;
        font-family: 'Poppins', sans-serif;
    }
</style>
<div class="container">
    <div class="jumbotron">
        <h1 class="display-5">Welcome to Hospital Management System</h1>
        <p class="lead">This is the main page of the system.</p>
        <hr class="my-4">
        <p>You can navigate through the system using the navigation bar above.</p>
    </div>

    <section class="navigationli">
        <h2 class="section-heading">Navigation</h2>
        <nav>
            <ul>
                <li><a href="{% url 'patient_create' %}">Create New Patient</a></li>

                <!-- You can uncomment and add more navigation links here as needed -->
            </ul>
        </nav>
    </section>

    <section class="recent-records">
        <!-- Recent Admitted Patients -->
        <h2>Currently Admitted Patients</h2>
        {% if admitted_patients %}
        <table>
            <thead>
                <tr>
                    <th>Patient Name</th>
                    <th>Admission Number</th>                    
                    <th>National ID</th>
                    <th>Date of Birth</th>
                    <th>Admitted By</th>
                    <th>Admission Date</th>                  
                    <th>Admission Department</th>
                    <th>Room</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for admission in admitted_patients %}
                <tr>
                    <td>{{ admission.patient.full_name }}</td>
                    <td>{{ admission.admission_number }}</td>                    
                    <td>{{ admission.patient.national_number }}</td>
                    {% if admission.patient.date_of_birth %}
                    <td>{{ admission.patient.date_of_birth }}</td>
                    {% else %}
                    <td>-</td>
                    {% endif %}
                    <td>{{ admission.admitted_by }}</td>
                    <td>{{ admission.admission_date }}</td>                    
                    <td>{{ admission.admission_department }}</td>
                    <td>{{ admission.room }}</td>
                    <td>
                        <a href="{% url 'admission_detail' admission.pk %}">Print</a> |
                        <a href="{% url 'patient_edit' admission.patient.pk %}">Edit</a> |
                        <a href="{% url 'patient_delete' admission.patient.pk %}">Delete</a> |
                        <a href="{% url 'discharge_create' admission_pk=admission.pk %}">Discharge</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <p>No patients currently admitted.</p>
        {% endif %}

        <!-- Recent Discharged Patients -->
        <h2>Recently Discharged Patients</h2>
        {% if discharged_patients %}
        <table>
            <thead>
                <tr>
                    <th>Full Name</th>
                    <th>Admission Number</th>
                    <th>Discharge Date</th>
                    <th>Discharge Time</th>
                    <th>Length of Stay (Days)</th>
                    <th>Discharge Status</th>
                    <th>Discharge Destination</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                {% for discharge in discharged_patients %}
                <tr>
                    <td>{{ discharge.admission_number.patient.full_name }}</td>
                    <td>{{ discharge.admission_number.admission_number }}</td>
                    <td>{{ discharge.discharge_date }}</td>
                    <td>{{ discharge.discharge_time }}</td>
                    <td>{{ discharge.length_of_stay }}</td>
                    <td>{{ discharge.discharge_status }}</td>
                    <td>{{ discharge.discharge_destination }}</td>
                    <td>
                        <a href="{% url 'patient_detail' discharge.admission_number.patient.pk%}">Details</a> |
                        <a href="{% url 'patient_edit' discharge.admission_number.patient.pk %}">Edit</a> |
                        <a href="{% url 'patient_delete' discharge.admission_number.patient.pk %}">Delete</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <p>No patients recently discharged.</p>
        {% endif %}

        <section class="about">
            <h2>About</h2>
            <p>This system helps manage patient admissions, discharges, and related information.</p>
        </section>
</div>

{% endblock %}